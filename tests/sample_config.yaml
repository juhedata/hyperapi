services:
  - service_id: leric/account_service
    path: /account
    protocol: http
    auth:
      type: AppKey
    timeout: 3
    load_balance: "hash"
    circurt_breaker:
      error_threshold: 10
      error_reset: 60
      retry_interval: 10
    upstreams:
      - id: 12
        timeout: 3
        target: "http://127.0.0.1:9999/"
    filters:
      - type: Header
        setting:
          operate_on: "request"
          injection:
            - ['X-Authentication', "source-authenticate-token"]
          removal:
            - "Authentication"
      - type: ACL
        setting:
          access_control: "allow"
          paths:
            - methods: "GET,POST,DELETE,PUT,OPTIONS,PATCH"
              path_regex: ".*"
    sla:
      - name: Default
        filters:
          - type: RateLimit
            setting:
              interval: 1
              limit: 100
              burst: 200

clients:
  - client_id: account/crm
    app_key: 1345432321
    pub_key: ""
    ip_whitelist: []
    services:
      leric/account_service: Default

